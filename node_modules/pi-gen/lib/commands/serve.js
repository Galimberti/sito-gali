"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const command_1 = require("@oclif/command");
const Builder = require("./build");
class Compile extends command_1.Command {
    async run() {
        var bs = require("browser-sync").create();
        // Build src and Start the Browsersync server
        Builder.default.run().then(() => {
            bs.init({
                server: {
                    baseDir: "./build",
                    serveStaticOptions: {
                        extensions: ['html']
                    }
                }
            });
        });
        // watch data & src folder
        bs.watch(['./data/**/*', './src/**/*']).on('change', () => {
            Builder.default.run().then(() => {
                // reload browser
                bs.reload();
            });
        });
    }
}
Compile.description = 'watch /src /data an reload';
Compile.examples = [
    `$ pi-gen serve`,
];
exports.default = Compile;
